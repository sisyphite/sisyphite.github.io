<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>∞</title>
<link rel="icon" type="image/png" href="icon.png">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Cinzel:wght@300;400&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #000;
    overflow: hidden;
    width: 100vw;
    height: 100vh;
    cursor: none;
  }

  canvas {
    position: fixed;
    inset: 0;
    display: block;
  }

  /* Custom cursor */
  .cursor {
    position: fixed;
    width: 6px;
    height: 6px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    pointer-events: none;
    transform: translate(-50%, -50%);
    z-index: 1000;
    transition: transform 0.1s;
    box-shadow: 0 0 12px rgba(255,255,255,0.6), 0 0 40px rgba(180,220,255,0.3);
  }
  .cursor-ring {
    position: fixed;
    width: 32px;
    height: 32px;
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 50%;
    pointer-events: none;
    transform: translate(-50%, -50%);
    z-index: 999;
    transition: transform 0.15s, width 0.3s, height 0.3s, opacity 0.3s;
  }

  /* Quote overlay */
  .quote-container {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 10;
  }

  .quote-wrap {
    text-align: center;
    max-width: 560px;
    padding: 0 40px;
  }

  .quote-text {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: clamp(18px, 2.2vw, 26px);
    color: rgba(255, 255, 255, 0.0);
    line-height: 1.75;
    letter-spacing: 0.02em;
    text-shadow: 0 0 40px rgba(160,200,255,0.4);
    transition: color 2s ease, opacity 2s ease;
  }
  .quote-text.visible {
    color: rgba(255, 255, 255, 0.82);
  }

  .quote-author {
    margin-top: 18px;
    font-family: 'Cinzel', serif;
    font-weight: 300;
    font-size: clamp(9px, 0.85vw, 11px);
    letter-spacing: 0.35em;
    color: rgba(255,255,255,0.0);
    text-transform: uppercase;
    transition: color 2s ease 0.4s;
  }
  .quote-author.visible {
    color: rgba(160, 200, 255, 0.55);
  }

  /* Name / title */
  .name-tag {
    position: fixed;
    bottom: 36px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Cinzel', serif;
    font-weight: 300;
    font-size: 11px;
    letter-spacing: 0.4em;
    color: rgba(255,255,255,0.18);
    z-index: 10;
    pointer-events: none;
    text-transform: uppercase;
    white-space: nowrap;
  }

  /* Corner coord display */
  .coords {
    position: fixed;
    top: 28px;
    right: 32px;
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.25em;
    color: rgba(255,255,255,0.12);
    z-index: 10;
    pointer-events: none;
    line-height: 1.8;
  }

  /* PORTAL PANEL */
  .portal-toggle {
    position: fixed;
    bottom: 28px;
    left: 28px;
    z-index: 200;
    width: 36px;
    height: 36px;
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 50%;
    background: rgba(0,0,0,0.5);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    color: rgba(255,255,255,0.4);
    transition: all 0.25s;
    backdrop-filter: blur(4px);
  }
  .portal-toggle:hover {
    border-color: rgba(255,255,255,0.4);
    color: rgba(255,255,255,0.8);
    box-shadow: 0 0 20px rgba(180,220,255,0.15);
  }

  .portal-panel {
    position: fixed;
    bottom: 72px;
    left: 28px;
    z-index: 200;
    width: 220px;
    background: rgba(4,8,14,0.88);
    border: 1px solid rgba(255,255,255,0.1);
    backdrop-filter: blur(12px);
    padding: 0;
    transform-origin: bottom left;
    transform: scale(0.92) translateY(8px);
    opacity: 0;
    pointer-events: none;
    transition: all 0.22s ease;
  }
  .portal-panel.open {
    transform: scale(1) translateY(0);
    opacity: 1;
    pointer-events: all;
  }

  .portal-header {
    padding: 10px 14px;
    border-bottom: 1px solid rgba(255,255,255,0.07);
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.3em;
    color: rgba(255,255,255,0.25);
    text-transform: uppercase;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .portal-status {
    width: 5px; height: 5px;
    border-radius: 50%;
    background: rgba(100,200,255,0.5);
    animation: blink 2s ease infinite;
  }
  @keyframes blink {
    0%,100% { opacity: 0.5; }
    50% { opacity: 1; }
  }

  .portal-list {
    padding: 6px 0;
    max-height: 280px;
    overflow-y: auto;
  }
  .portal-list::-webkit-scrollbar { width: 2px; }
  .portal-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); }

  .portal-item {
    display: block;
    padding: 9px 14px;
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 0.15em;
    color: rgba(255,255,255,0.45);
    text-decoration: none;
    transition: all 0.15s;
    border-left: 2px solid transparent;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .portal-item:hover {
    color: rgba(200,230,255,0.9);
    border-left-color: rgba(180,220,255,0.4);
    background: rgba(180,220,255,0.04);
    letter-spacing: 0.18em;
  }

  .portal-loading {
    padding: 14px;
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.2em;
    color: rgba(255,255,255,0.2);
    text-align: center;
  }
</style>
</head>
<body>

<canvas id="c"></canvas>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursor-ring"></div>

<div class="quote-container">
  <div class="quote-wrap">
    <div class="quote-text" id="quote-text"></div>
    <div class="quote-author" id="quote-author"></div>
  </div>
</div>

<div class="name-tag" id="name-tag">— sisyphite.github.io —</div>

<div style="position:fixed;bottom:28px;right:32px;font-family:'Cinzel',serif;font-size:9px;letter-spacing:0.25em;color:rgba(255,255,255,0.1);z-index:10;pointer-events:none;text-transform:uppercase;">made by Claude</div>

<div class="coords" id="coords"></div>

<!-- PORTAL -->
<button class="portal-toggle" id="portal-toggle" onclick="togglePortal()" title="My Pages">⊹</button>
<div class="portal-panel" id="portal-panel">
  <div class="portal-header">
    <span>SISYPHITE.GITHUB.IO</span>
    <div class="portal-status"></div>
  </div>
  <div class="portal-list" id="portal-list">
    <div class="portal-loading">LOADING...</div>
  </div>
</div>

<script>
// ── Quotes ──
const quotes = [
  { text: "The cosmos is within us.\nWe are made of star-stuff.", author: "Carl Sagan" },
  { text: "Existence precedes essence.", author: "Jean-Paul Sartre" },
  { text: "Not only is the universe stranger than we think,\nit is stranger than we can think.", author: "Werner Heisenberg" },
  { text: "The most beautiful thing we can experience\nis the mysterious.", author: "Albert Einstein" },
  { text: "To be is to be perceived.", author: "George Berkeley" },
  { text: "We are all just walking each other home.", author: "Ram Dass" },
  { text: "The eternal silence of these infinite spaces\nfrightens me.", author: "Blaise Pascal" },
  { text: "Man is condemned to be free.", author: "Jean-Paul Sartre" },
  { text: "In the beginning was the void,\nand the void was without form.", author: "∅" },
  { text: "Mathematics is the language\nin which God has written the universe.", author: "Galileo Galilei" },
  { text: "I think, therefore I am.", author: "René Descartes" },
  { text: "The unexamined life is not worth living.", author: "Socrates" },
  { text: "God is dead. God remains dead.\nAnd we have killed him.", author: "Friedrich Nietzsche" },
  { text: "He who has a why to live\ncan bear almost any how.", author: "Friedrich Nietzsche" },
  { text: "What we observe is not nature itself,\nbut nature exposed to our method of questioning.", author: "Werner Heisenberg" },
  { text: "The only true wisdom is in knowing\nyou know nothing.", author: "Socrates" },
  { text: "One cannot step into the same river twice.", author: "Heraclitus" },
  { text: "Everything flows.", author: "Heraclitus" },
  { text: "The universe is under no obligation\nto make sense to you.", author: "Neil deGrasse Tyson" },
  { text: "Two things are infinite: the universe\nand human stupidity.", author: "Albert Einstein" },
  { text: "If you wish to make an apple pie from scratch,\nyou must first invent the universe.", author: "Carl Sagan" },
  { text: "We are a way for the cosmos\nto know itself.", author: "Carl Sagan" },
  { text: "Somewhere, something incredible\nis waiting to be known.", author: "Carl Sagan" },
  { text: "The brain is wider than the sky.", author: "Emily Dickinson" },
  { text: "Hell is other people.", author: "Jean-Paul Sartre" },
  { text: "The obstacle is the path.", author: "Zen proverb" },
  { text: "Before enlightenment, chop wood, carry water.\nAfter enlightenment, chop wood, carry water.", author: "Zen proverb" },
  { text: "Form is emptiness.\nEmptiness is form.", author: "Heart Sutra" },
  { text: "The Tao that can be told\nis not the eternal Tao.", author: "Laozi" },
  { text: "To know others is wisdom.\nTo know oneself is enlightenment.", author: "Laozi" },
  { text: "Reality is merely an illusion,\nalbeit a very persistent one.", author: "Albert Einstein" },
  { text: "Imagination is more important\nthan knowledge.", author: "Albert Einstein" },
  { text: "A human being is a part of the whole,\ncalled by us 'Universe'.", author: "Albert Einstein" },
  { text: "The most incomprehensible thing about the universe\nis that it is comprehensible.", author: "Albert Einstein" },
  { text: "All of humanity's problems stem from\nman's inability to sit quietly in a room alone.", author: "Blaise Pascal" },
  { text: "The heart has reasons\nthat reason cannot know.", author: "Blaise Pascal" },
  { text: "The present moment\nalways will have been.", author: "∅" },
  { text: "I would rather have questions that can't be answered\nthan answers that can't be questioned.", author: "Richard Feynman" },
  { text: "The first principle is that you must not fool yourself —\nand you are the easiest person to fool.", author: "Richard Feynman" },
  { text: "知者不博，博者不知。", author: "老子" },
  { text: "为学日益，为道日损。", author: "老子" },
  { text: "知足者富。", author: "老子" },
  { text: "吾生也有涯，而知也无涯。\n以有涯随无涯，殆已。", author: "庄子" },
  { text: "天地与我并生，\n而万物与我为一。", author: "庄子" },
  { text: "方生方死，方死方生。", author: "庄子" },
  { text: "色即是空，空即是色。", author: "心经" },
  { text: "凡所有相，皆是虚妄。", author: "金刚经" },
  { text: "应无所住而生其心。", author: "金刚经" },
  { text: "菩提本无树，明镜亦非台。\n本来无一物，何处惹尘埃。", author: "慧能" },
  { text: "Not all those who wander\nare lost.", author: "J.R.R. Tolkien" },
  { text: "The cave you fear to enter\nholds the treasure you seek.", author: "Joseph Campbell" },
  { text: "We shall not cease from exploration,\nand the end of all our exploring\nwill be to arrive where we started.", author: "T.S. Eliot" },
  { text: "To be or not to be,\nthat is the question.", author: "Shakespeare" },
  { text: "All the world's a stage,\nand all the men and women merely players.", author: "Shakespeare" },
  { text: "There are more things in heaven and earth\nthan are dreamt of in your philosophy.", author: "Shakespeare" },
  { text: "It does not matter how slowly you go\nas long as you do not stop.", author: "Confucius" },
  { text: "Everything has beauty,\nbut not everyone sees it.", author: "Confucius" },
  { text: "Silence is a source of great strength.", author: "Laozi" },
  { text: "The journey of a thousand miles\nbegins with one step.", author: "Laozi" },
  { text: "You are not a drop in the ocean.\nYou are the entire ocean in a drop.", author: "Rumi" },
  { text: "Out beyond ideas of wrongdoing and rightdoing,\nthere is a field. I'll meet you there.", author: "Rumi" },
  { text: "The wound is the place\nwhere the light enters you.", author: "Rumi" },
  { text: "What you seek\nis seeking you.", author: "Rumi" },
  { text: "Look up at the stars\nand not down at your feet.", author: "Stephen Hawking" },
  { text: "We are just an advanced breed of monkeys\non a minor planet of a very average star.", author: "Stephen Hawking" },
  { text: "The world is everything\nthat is the case.", author: "Ludwig Wittgenstein" },
  { text: "Whereof one cannot speak,\nthereof one must be silent.", author: "Ludwig Wittgenstein" },
  { text: "The limits of my language\nmean the limits of my world.", author: "Ludwig Wittgenstein" },
  { text: "Life is what happens\nwhile you are busy making other plans.", author: "John Lennon" },
  { text: "Almost everything will work again\nif you unplug it for a few minutes —\nincluding you.", author: "Anne Lamott" },
  { text: "Yesterday I was clever, so I wanted to change the world.\nToday I am wise, so I am changing myself.", author: "Rumi" },
  { text: "The truth will set you free.\nBut first, it will make you miserable.", author: "∅" },
  { text: "We are all alone, born alone, die alone.", author: "Hunter S. Thompson" },
  { text: "Do not go gentle\ninto that good night.", author: "Dylan Thomas" },
  { text: "I am large,\nI contain multitudes.", author: "Walt Whitman" },
  { text: "In the middle of difficulty\nlies opportunity.", author: "Albert Einstein" },
  { text: "An unexamined faith\nis not worth having.", author: "∅" },
  { text: "天下皆知美之为美，\n斯恶已。", author: "老子" },
  { text: "至人无己，神人无功，圣人无名。", author: "庄子" },
  { text: "圣人不积，既以为人己愈有。", author: "老子" },
  { text: "为而不争。", author: "老子" },
  { text: "Stars, hide your fires;\nlet not light see my dark and deep desires.", author: "Shakespeare" },
  { text: "Our greatest glory is not in never falling,\nbut in rising every time we fall.", author: "Confucius" },
  { text: "In the end, it's not the years in your life\nthat count. It's the life in your years.", author: "Abraham Lincoln" },
  { text: "Knowing yourself is the beginning\nof all wisdom.", author: "Aristotle" },
  { text: "The more I learn,\nthe more I realize how much I don't know.", author: "Albert Einstein" },
  { text: "We are stardust,\nbillion year old carbon.", author: "Joni Mitchell" },
  { text: "I have no special talents.\nI am only passionately curious.", author: "Albert Einstein" },
  { text: "A reader lives a thousand lives\nbefore he dies. The man who never reads\nlives only one.", author: "George R.R. Martin" },
];

// Shuffle on load
for (let i = quotes.length - 1; i > 0; i--) {
  const j = Math.floor(Math.random() * (i + 1));
  [quotes[i], quotes[j]] = [quotes[j], quotes[i]];
}

// ── Canvas ──
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let W, H, cx, cy;
function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
  cx = W / 2; cy = H / 2;
}
resize();
window.addEventListener('resize', resize);

// ── Mouse ──
let mouse = { x: -999, y: -999, active: false };
const cursorEl = document.getElementById('cursor');
const cursorRing = document.getElementById('cursor-ring');
document.addEventListener('mousemove', e => {
  mouse.x = e.clientX; mouse.y = e.clientY; mouse.active = true;
  cursorEl.style.left = e.clientX + 'px';
  cursorEl.style.top = e.clientY + 'px';
  cursorRing.style.left = e.clientX + 'px';
  cursorRing.style.top = e.clientY + 'px';
  document.getElementById('coords').textContent =
    `α  ${(e.clientX / W * 360).toFixed(1)}°\nδ  ${((1 - e.clientY / H) * 180 - 90).toFixed(1)}°`;
});

// ── 10 hero particles ──
const N = 10;
const starColors = [
  [180, 210, 255],[200, 225, 255],[255, 255, 220],
  [255, 220, 150],[255, 160, 100],[255, 130, 120],
  [220, 180, 255],[180, 255, 220],[255, 200, 230],[255, 230, 100],
];

class Particle {
  constructor(i) {
    this.i = i;
    this.init();
  }
  init() {
    // Spread across different orbital zones to cover screen
    const zone = this.i / N;
    const minR = Math.min(W, H) * (0.1 + zone * 0.35);
    const maxR = Math.min(W, H) * (0.2 + zone * 0.42);
    const r = minR + Math.random() * (maxR - minR);
    const angle = (this.i / N) * Math.PI * 2 + Math.random() * 0.8;
    this.x = cx + Math.cos(angle) * r;
    this.y = cy + Math.sin(angle) * r;
    // Orbital velocity — enough to stay in orbit
    const spd = 0.6 + Math.random() * 1.0;
    const dir = Math.random() < 0.5 ? 1 : -1;
    this.vx = Math.cos(angle + Math.PI/2) * spd * dir;
    this.vy = Math.sin(angle + Math.PI/2) * spd * dir;
    // Visual — will morph over time
    const col = starColors[this.i % starColors.length];
    this.r = col[0]; this.g = col[1]; this.b = col[2];
    // Target color for morphing
    this.tr = col[0]; this.tg = col[1]; this.tb = col[2];
    this.size = 2 + Math.random() * 3;
    this.targetSize = this.size;
    this.alpha = 0.7 + Math.random() * 0.3;
    this.haloSize = 30 + Math.random() * 50;
    this.targetHalo = this.haloSize;
    this.morphTimer = Math.random() * 200;
    this.trail = [];
    this.maxTrail = 18 + Math.floor(Math.random() * 20);
  }
  morph() {
    // Every ~3-5 seconds smoothly shift to new color/size
    this.morphTimer--;
    if (this.morphTimer <= 0) {
      this.morphTimer = 180 + Math.random() * 120;
      const col = starColors[Math.floor(Math.random() * starColors.length)];
      this.tr = col[0]; this.tg = col[1]; this.tb = col[2];
      this.targetSize = 1.5 + Math.random() * 4;
      this.targetHalo = 20 + Math.random() * 80;
    }
    // Lerp toward target
    const s = 0.008;
    this.r += (this.tr - this.r) * s;
    this.g += (this.tg - this.g) * s;
    this.b += (this.tb - this.b) * s;
    this.size += (this.targetSize - this.size) * s;
    this.haloSize += (this.targetHalo - this.haloSize) * s;
  }
}

const particles = [];
for (let i = 0; i < N; i++) particles.push(new Particle(i));

// Background static stars
const bgStars = [];
for (let i = 0; i < 220; i++) {
  bgStars.push({
    x: Math.random(), y: Math.random(),
    s: Math.random() * 1.0 + 0.2,
    a: Math.random() * 0.35 + 0.08,
    t: Math.random() * Math.PI * 2,
    ts: 0.003 + Math.random() * 0.008,
  });
}

// ── Quote cycling ──
let quoteIndex = 0;
const qText = document.getElementById('quote-text');
const qAuthor = document.getElementById('quote-author');

function showQuote(idx) {
  qText.classList.remove('visible');
  qAuthor.classList.remove('visible');
  setTimeout(() => {
    const q = quotes[idx % quotes.length];
    qText.textContent = q.text;
    qAuthor.textContent = '— ' + q.author;
    setTimeout(() => {
      qText.classList.add('visible');
      qAuthor.classList.add('visible');
    }, 100);
  }, 800);
}
showQuote(0);
setInterval(() => {
  qText.classList.remove('visible');
  qAuthor.classList.remove('visible');
  setTimeout(() => {
    quoteIndex = (quoteIndex + 1) % quotes.length;
    showQuote(quoteIndex);
  }, 2000);
}, 60000);

// ── Physics constants ──
const CENTER_MASS = 14000;
const MOUSE_MASS  = 5000;
const DAMPING     = 0.9998;
const MIN_DIST    = 15;
const MAX_MOUSE   = 420;

// ── Throttled RAF — ~30fps ──
let lastTime = 0;
const TARGET_INTERVAL = 1000 / 30;

function draw(ts) {
  // ── Portal ──
let portalOpen = false;
let portalLoaded = false;

function togglePortal() {
  portalOpen = !portalOpen;
  document.getElementById('portal-panel').classList.toggle('open', portalOpen);
  if (portalOpen && !portalLoaded) loadRepos();
}

async function loadRepos() {
  try {
    const res = await fetch('https://api.github.com/users/sisyphite/repos?per_page=100&sort=updated');
    const repos = await res.json();
    const list = document.getElementById('portal-list');
    list.innerHTML = '';

    // Filter out the main github.io repo itself, sort by name
    const filtered = repos
      .filter(r => !r.fork && r.name !== 'sisyphite.github.io')
      .sort((a,b) => a.name.localeCompare(b.name));

    if (!filtered.length) {
      list.innerHTML = '<div class="portal-loading">NO REPOS FOUND</div>';
      return;
    }

    // Add home link first
    const home = document.createElement('a');
    home.className = 'portal-item';
    home.href = 'https://sisyphite.github.io';
    home.target = '_blank';
    home.textContent = '~ HOME';
    list.appendChild(home);

    filtered.forEach(repo => {
      const a = document.createElement('a');
      a.className = 'portal-item';
      a.href = `https://sisyphite.github.io/${repo.name}`;
      a.target = '_blank';
      a.textContent = repo.name;
      list.appendChild(a);
    });

    portalLoaded = true;
  } catch(e) {
    document.getElementById('portal-list').innerHTML =
      '<div class="portal-loading">FAILED TO LOAD</div>';
  }
}

// Close portal when clicking outside
document.addEventListener('click', e => {
  if (portalOpen &&
      !e.target.closest('#portal-panel') &&
      !e.target.closest('#portal-toggle')) {
    portalOpen = false;
    document.getElementById('portal-panel').classList.remove('open');
  }
});

requestAnimationFrame(draw);
  if (ts - lastTime < TARGET_INTERVAL) return;
  lastTime = ts;

  // Fade trail
  ctx.fillStyle = 'rgba(0,0,3,0.22)';
  ctx.fillRect(0, 0, W, H);

  // Background stars
  for (const s of bgStars) {
    s.t += s.ts;
    const a = s.a * (0.55 + 0.45 * Math.sin(s.t));
    ctx.beginPath();
    ctx.arc(s.x * W, s.y * H, s.s, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(210,225,255,${a.toFixed(3)})`;
    ctx.fill();
  }

  // Central glow
  const cg = ctx.createRadialGradient(cx, cy, 0, cx, cy, 90);
  cg.addColorStop(0, 'rgba(160,195,255,0.13)');
  cg.addColorStop(1, 'rgba(0,0,0,0)');
  ctx.fillStyle = cg;
  ctx.fillRect(0, 0, W, H);

  // Mouse glow
  if (mouse.active) {
    const mg = ctx.createRadialGradient(mouse.x, mouse.y, 0, mouse.x, mouse.y, 55);
    mg.addColorStop(0, 'rgba(180,220,255,0.07)');
    mg.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = mg;
    ctx.fillRect(0, 0, W, H);
  }

  // Particles
  for (const p of particles) {
    p.morph();

    // Center gravity
    let dx = cx - p.x, dy = cy - p.y;
    let dist = Math.max(Math.sqrt(dx*dx + dy*dy), MIN_DIST);
    const fc = CENTER_MASS / (dist * dist);
    p.vx += (dx/dist) * fc * 0.016;
    p.vy += (dy/dist) * fc * 0.016;

    // Mouse gravity
    if (mouse.active) {
      dx = mouse.x - p.x; dy = mouse.y - p.y;
      dist = Math.max(Math.sqrt(dx*dx + dy*dy), MIN_DIST);
      if (dist < MAX_MOUSE) {
        const fm = MOUSE_MASS / (dist*dist);
        p.vx += (dx/dist) * fm * 0.016;
        p.vy += (dy/dist) * fm * 0.016;
      }
    }

    p.vx *= DAMPING; p.vy *= DAMPING;

    // Speed cap
    const spd = Math.sqrt(p.vx*p.vx + p.vy*p.vy);
    if (spd > 6) { p.vx = p.vx/spd*6; p.vy = p.vy/spd*6; }

    p.x += p.vx; p.y += p.vy;

    // Re-inject if escaped
    if (p.x < -150 || p.x > W+150 || p.y < -150 || p.y > H+150) p.init();

    // Trail
    p.trail.push({ x: p.x, y: p.y });
    if (p.trail.length > p.maxTrail) p.trail.shift();

    // Draw trail
    for (let i = 1; i < p.trail.length; i++) {
      const t = i / p.trail.length;
      ctx.beginPath();
      ctx.moveTo(p.trail[i-1].x, p.trail[i-1].y);
      ctx.lineTo(p.trail[i].x, p.trail[i].y);
      ctx.strokeStyle = `rgba(${p.r|0},${p.g|0},${p.b|0},${(t * 0.35).toFixed(3)})`;
      ctx.lineWidth = p.size * t * 0.7;
      ctx.stroke();
    }

    // Halo — single radial gradient, large and soft
    const hr = p.haloSize;
    const hg = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, hr);
    hg.addColorStop(0,   `rgba(${p.r|0},${p.g|0},${p.b|0},0.18)`);
    hg.addColorStop(0.3, `rgba(${p.r|0},${p.g|0},${p.b|0},0.07)`);
    hg.addColorStop(1,   `rgba(${p.r|0},${p.g|0},${p.b|0},0)`);
    ctx.beginPath();
    ctx.arc(p.x, p.y, hr, 0, Math.PI*2);
    ctx.fillStyle = hg;
    ctx.fill();

    // Core
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
    ctx.fillStyle = `rgba(${p.r|0},${p.g|0},${p.b|0},${p.alpha.toFixed(3)})`;
    ctx.fill();

    // Bright center point
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size * 0.35, 0, Math.PI*2);
    ctx.fillStyle = `rgba(255,255,255,0.85)`;
    ctx.fill();
  }

  // Central star — pulsing
  const pulse = 1 + 0.1 * Math.sin(Date.now() * 0.002);
  const cs = ctx.createRadialGradient(cx, cy, 0, cx, cy, 16 * pulse);
  cs.addColorStop(0,   'rgba(255,255,255,0.95)');
  cs.addColorStop(0.25,'rgba(200,225,255,0.55)');
  cs.addColorStop(0.7, 'rgba(140,180,255,0.12)');
  cs.addColorStop(1,   'rgba(0,0,0,0)');
  ctx.beginPath();
  ctx.arc(cx, cy, 16 * pulse, 0, Math.PI*2);
  ctx.fillStyle = cs;
  ctx.fill();
}

// ── Portal ──
let portalOpen = false;
let portalLoaded = false;

function togglePortal() {
  portalOpen = !portalOpen;
  document.getElementById('portal-panel').classList.toggle('open', portalOpen);
  if (portalOpen && !portalLoaded) loadRepos();
}

async function loadRepos() {
  try {
    const res = await fetch('https://api.github.com/users/sisyphite/repos?per_page=100&sort=updated');
    const repos = await res.json();
    const list = document.getElementById('portal-list');
    list.innerHTML = '';

    // Filter out the main github.io repo itself, sort by name
    const filtered = repos
      .filter(r => !r.fork && r.name !== 'sisyphite.github.io')
      .sort((a,b) => a.name.localeCompare(b.name));

    if (!filtered.length) {
      list.innerHTML = '<div class="portal-loading">NO REPOS FOUND</div>';
      return;
    }

    // Add home link first
    const home = document.createElement('a');
    home.className = 'portal-item';
    home.href = 'https://sisyphite.github.io';
    home.target = '_blank';
    home.textContent = '~ HOME';
    list.appendChild(home);

    filtered.forEach(repo => {
      const a = document.createElement('a');
      a.className = 'portal-item';
      a.href = `https://sisyphite.github.io/${repo.name}`;
      a.target = '_blank';
      a.textContent = repo.name;
      list.appendChild(a);
    });

    portalLoaded = true;
  } catch(e) {
    document.getElementById('portal-list').innerHTML =
      '<div class="portal-loading">FAILED TO LOAD</div>';
  }
}

// Close portal when clicking outside
document.addEventListener('click', e => {
  if (portalOpen &&
      !e.target.closest('#portal-panel') &&
      !e.target.closest('#portal-toggle')) {
    portalOpen = false;
    document.getElementById('portal-panel').classList.remove('open');
  }
});

requestAnimationFrame(draw);
</script>
</body>
</html>
